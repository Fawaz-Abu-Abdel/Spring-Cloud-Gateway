<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gateway Routes Management</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/common.css}">
  <link rel="stylesheet" th:href="@{/css/routes.css}">
</head>
<body>
  <div class="container">
    <div class="header">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
          <h1>Gateway Routes Management</h1>
          <p class="subtitle">Manage your Spring Cloud Gateway routes dynamically</p>
        </div>
        <form th:action="@{/logout}" method="post" style="margin: 0;">
          <button type="submit" class="btn btn-danger" style="font-size: 0.85em; padding: 8px 16px;">Logout</button>
        </form>
      </div>
    </div>




    <!-- <div th:if="${success}" class="alert alert-success" th:text="${success}"></div> -->
    <!-- <div th:if="${error}" class="alert alert-error" th:text="${error}"></div> -->

    <div class="actions">
      <a href="/admin/routes/simple" class="btn btn-primary">Simple Route Creator</a>
      <a href="/admin/routes/new" class="btn btn-secondary">Advanced Route Creator</a>
    </div>

    <div th:if="${routes != null and !routes.isEmpty()}" class="routes-grid">
      <div th:each="route : ${routes}" class="route-card">
        <div class="route-id" th:text="${route.id}">Route id</div>

        <div class="route-info">
          <span class="route-label">URI:</span>
          <div class="route-value" th:text="${route.uri}">http://example.com</div>
        </div>

        <div th:if="${route.description != null and !route.description.isEmpty()}" class="route-info">
          <span class="route-label">Description:</span>
          <div class="route-value" th:text="${route.description}">Description</div>
        </div>

        <div th:if="${route.order != null}" class="route-info">
          <span class="route-label">Order:</span>
          <div class="route-value" th:text="${route.order}">0</div>
        </div>

        <div class="route-badges">
          <span th:each="predicate : ${route.predicates}" class="badge badge-predicate" th:text="${predicate.name}">Predicate</span>
          <span th:each="filter : ${route.filters}" class="badge badge-filter" th:text="${filter.name}">Filter</span>
        </div>

        <div class="route-actions">
          <a th:href="@{/admin/routes/view/{id}(id=${route.id})}" class="btn btn-info">View</a>
          <a th:href="@{/admin/routes/edit/{id}(id=${route.id})}" class="btn btn-secondary">Edit</a>
          <form th:action="@{/admin/routes/delete/{id}(id=${route.id})}" method="post" class="delete-form"
                onsubmit="return confirm('Are you sure you want to delete this route?');">
            <button type="submit" class="btn btn-danger">Delete</button>
          </form>
        </div>
      </div>
    </div>

    <!-- <div th:if="${routes == null or routes.isEmpty()}" class="empty-state">
      <div class="empty-state-icon">ðŸ“­</div>
      <div class="empty-state-text">No routes configured yet</div>
      <a href="/admin/routes/new" class="btn btn-primary">Create Your First Route</a>
    </div> -->
  </div>
</body>
</html>
